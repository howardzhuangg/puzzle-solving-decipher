<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Caesar + Atbash Cipher Decoder</title>
<style>
  body { font-family: Arial, sans-serif; background:#111; color:white; padding:40px; }
  h1 { color:#4dd0e1; margin-bottom: 10px; }
  textarea { width:100%; height:120px; padding:12px; font-size:16px; border-radius:8px; border:1px solid #444; background:#1a1a1a; color:white; }
  button { margin-top:12px; padding:10px 16px; border:none; border-radius:8px; cursor:pointer; font-size:16px; }
  .decodeBtn { background:#4dd0e1; color:black; font-weight:bold; }
  .exampleBtn { background:#222; border:1px solid #555; color:white; }
  .output { margin-top:20px; padding:15px; background:#1a1a1a; border-radius:8px; border:1px solid #333; white-space:pre-wrap; }
  .sectionTitle { margin-top:25px; font-size:17px; font-weight:bold; color:#4dd0e1; }
</style>
</head>

<body>

<h1>üîê Simple Cipher Decoder</h1>
<p>Automatically detects and decodes <b>Caesar</b> (any shift 0‚Äì25) or <b>Atbash</b>.</p>

<textarea id="inputText" placeholder="Enter cipher text (e.g., KHOOR or SVOOL)..."></textarea>
<br>
<button class="decodeBtn" onclick="decode()">Decode</button>
<button class="exampleBtn" onclick="setExample('KHOOR')">Example Caesar (KHOOR ‚Üí HELLO)</button>
<button class="exampleBtn" onclick="setExample('SVOOL')">Example Atbash (SVOOL ‚Üí HELLO)</button>

<div class="output" id="decodedOutput">Decoded message will appear here.</div>

<div class="sectionTitle">Caesar Shift Table (0‚Äì25)</div>
<div class="output" id="shiftTable"></div>

<script>
const A = 'A'.charCodeAt(0);

// shift single letter
function shift(letter, n){
  let code = letter.charCodeAt(0) - A;
  return String.fromCharCode(A + (code - n + 26) % 26);
}

// decode with shift n
function caesarDecode(text, n){
  return text.toUpperCase().replace(/[A-Z]/g, c => shift(c, n));
}

// atbash decode
function atbashDecode(text){
  return text.toUpperCase().replace(/[A-Z]/g, c =>
    String.fromCharCode(A + (25 - (c.charCodeAt(0) - A)))
  );
}

// score how English-like text is
function englishScore(s){
  const commonWords = ["THE","AND","TO","OF","IN","IS","YOU","HELLO"];
  let score = 0;
  const upper = s.toUpperCase();
  commonWords.forEach(w => { if(upper.includes(w)) score += 5; });
  return score;
}

// detect best Caesar shift
function bestCaesar(input){
  let best = {shift: 0, text: input, score: -1};
  for(let s=0; s<26; s++){
    let decoded = caesarDecode(input, s);
    let score = englishScore(decoded);
    if(score > best.score){
      best = {shift: s, text: decoded, score};
    }
  }
  return best;
}

function decode(){
  const input = document.getElementById("inputText").value.toUpperCase();
  if(!input){ document.getElementById("decodedOutput").textContent = "Enter text."; return; }

  const caesar = bestCaesar(input);
  const atbash = atbashDecode(input);

  // choose better result
  const chosen = englishScore(atbash) > caesar.score ? 
    {method:"Atbash", text:atbash} : 
    {method:`Caesar (Shift ${caesar.shift})`, text:caesar.text};

  document.getElementById("decodedOutput").textContent =
    `Detected: ${chosen.method}\nResult: ${chosen.text}`;

  buildShiftTable(input);
}

// show full shift table with alphabet visualization
function buildShiftTable(input){
  let table = "";
  const alphabet = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";

  for(let s=0; s<26; s++){
    let shiftedAlphabet = alphabet.split("").map(c=>shift(c,s)).join("");
    let decoded = caesarDecode(input, s);
    table += `Shift ${s}:\nAlphabet:  ${alphabet}\n‚Üí Shifted:  ${shiftedAlphabet}\n‚Üí Decoded:  ${decoded}\n\n`;
  }

  document.getElementById("shiftTable").textContent = table;
}

function setExample(text){
  document.getElementById("inputText").value = text;
  decode();
}
</script>

</body>
</html>
